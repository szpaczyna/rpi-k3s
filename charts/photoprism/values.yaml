# Default values for photoprism.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: photoprism/photoprism-arm64
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

imagePullSecrets: []
nameOverride: "photoprism"
fullnameOverride: "photoprism"

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}
podSecurityContext: {}
securityContext: {}

service:
  type: ClusterIP
  port: 2342

env:
  PHOTOPRISM_STORAGE_PATH: /photoprism/storage
  PHOTOPRISM_ORIGINALS_PATH: /photoprism/originals
  ## See other config options from PhotoPrism documentation: https://docs.photoprism.org/getting-started/config-options/
  PHOTOPRISM_ADMIN_PASSWORD: "test"     # Initial admin password: PLEASE CHANGE!
  PHOTOPRISM_DEBUG: "true"                      # Run in debug mode (shows additional log messages)
  # PHOTOPRISM_PUBLIC: "false"                     # No authentication required (disables password protection)
  # PHOTOPRISM_READONLY: "false"                   # Don't modify originals directory (reduced functionality)
  PHOTOPRISM_EXPERIMENTAL: "false"               # Enable experimental features
  PHOTOPRISM_SITE_URL: "https://photoprism.shpaq.org/"  # Canonical / public site URL
  PHOTOPRISM_SITE_TITLE: "Szpacze Gniazdo Photos"
  PHOTOPRISM_SITE_CAPTION: "Szpacze Gniazdo Photos"
  # PHOTOPRISM_SITE_DESCRIPTION: ""
  PHOTOPRISM_SITE_AUTHOR: "Szpacze Gniazdo"
  # # You may optionally set user, group and/or file permissions using environment variables:
  UID: 1000
  GID: 1000
  UMASK: 0000


ingress:
  classname: traefik-lb
  enabled: true
  annotations:
  #  kubernetes.io/ingress.class: traefik
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.frontend.redirect.permanent: 'true'
    traefik.ingress.kubernetes.io/frontend-entry-points: http, https
    traefik.ingress.kubernetes.io/redirect-entry-point: https
  path: /  
  hosts:
  - photoprism.shpaq.org
  tls:
  -  secretName: photoprism-shpaq-org-tls
     hosts:
     - photoprism.shpaq.org

resources:
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  requests:
    cpu: 100m
    memory: 256Mi

autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 2
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

nodeSelector:
  kubernetes.io/role: worker

tolerations: []

affinity: {}

persistence:
  enabled: true
  storageClass: local-path
  accessMode: ReadWriteOnce
  size: 10Gi
  mountPath: /photoprism
