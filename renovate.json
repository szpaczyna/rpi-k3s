{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:base"],

  "enabledManagers": ["helm-values", "kubernetes"],

  "helm-values": {
    "fileMatch": [
      "(^|/)values\\.yaml$",
      "(^|/)values-public\\.yaml$"
    ]
  },

  "kubernetes": {
    "fileMatch": ["\\.ya?ml$"]
  },

  "ignorePaths": [
    "cluster/secrets/**",
    "**/*.enc",
    "**/*.enc.*",
    "**/*.md.*",
    "cluster/helm/postgresql/**"
  ],

  "hostRules": [
    {
      "matchHost": "docker.io",
      "username": "{{ secrets.DOCKERHUB_USERNAME }}",
      "password": "{{ secrets.DOCKERHUB_TOKEN }}"
    }
  ],

  "packageRules": [
    {
      "matchManagers": ["helm-values", "kubernetes"],
      "matchDatasources": ["docker"],
      "automerge": false,
      "separateMajorMinor": true,
      "separateMultipleMajor": true
    }
  ],

  "automerge": false,
  "prConcurrentLimit": 20
}